---
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import "katex/dist/katex.min.css";
import "remixicon/fonts/remixicon.css";
import "../styles/output.css";

const { title } = Astro.props;
---

<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" href="../styles/output.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css"
      integrity="sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0"
      crossorigin="anonymous"
    />
    <link rel="icon" type="image/png" href="/images/logo.png">
    <link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
    
    <title>{title}</title>
    <meta name="description" content="『第8回うぃーすた全国交流会』を2026年7月18日(土)〜19日(日)に大阪にて開催します！">
    <script>
      window.addEventListener('DOMContentLoaded', () => {
        if (sessionStorage.getItem("welcomeShown")) return;
      
        // 画像をプリロード
        const img = new Image();
        img.src = '/images/p0126_l.png';
      
        // --- オーバーレイ作成 ---
        const overlay = document.createElement('div');
        overlay.style.cssText = `
          position: fixed;
          top: 0; left: 0;
          width: 100vw; height: 100vh;
          display: flex;
          justify-content: center;
          align-items: center;
          background: linear-gradient(rgba(255,255,255,0.5), rgba(255,255,255,0.5)), url('/images/p0126_l.png') no-repeat center center;
          background-size: cover;
          z-index: 9999;
          opacity: 0;
          transition: opacity 0.5s;
        `;
        document.body.appendChild(overlay);
      
        // 少し遅らせてフェードイン
        setTimeout(() => overlay.style.opacity = '1', 50);
      
        // --- 文字コンテナ作成 ---
        const container = document.createElement('div');
        container.style.cssText = `
          display: flex;
          position: relative;
          top: -10px;
          flex-direction: row-reverse;
          gap: 2rem;
        `;
      
        const createLine = (text) => {
          const div = document.createElement('div');
          div.textContent = text;
          div.classList.add("zen-kaku-gothic-new", "load-fsize");
          div.style.cssText = `
            color: black;
            opacity: 0;
            transition: opacity 1s;
            writing-mode: vertical-rl;
            text-align: left;
          `;
          return div;
        };
      
        const line1 = createLine("吃音のある同年代の仲間たちと");
        const line2 = createLine("悩みや夢を語り合う、");
        const line3 = createLine("かけがえのない時間を過ごしてみませんか？");
      
        container.appendChild(line1);
        container.appendChild(line2);
        container.appendChild(line3);
        overlay.appendChild(container);
      
        // --- 文字フェードイン ---
        setTimeout(() => line1.style.opacity = "1", 800);
        setTimeout(() => line2.style.opacity = "1", 2500);
        setTimeout(() => line3.style.opacity = "1", 4000);
      
        // --- オーバーレイフェードアウト ---
        setTimeout(() => {
          overlay.style.opacity = "0";
          setTimeout(() => overlay.remove(), 1000);
        }, 7000);
      
        sessionStorage.setItem("welcomeShown", "true");
      });

      // --- トップへ戻るボタン ---
      document.addEventListener("DOMContentLoaded", () => {
        const backToTopButton = document.getElementById('backToTop');
        if (!backToTopButton) return;
      
        backToTopButton.addEventListener('click', () => {
          const start = window.scrollY;
          const duration = 320;
          const startTime = performance.now();
      
          function smoothScrollStep(now) {
            const elapsed = now - startTime;
            const progress = Math.min(elapsed / duration, 1);
            const ease = 1 - Math.pow(1 - progress, 3);
            window.scrollTo(0, start * (1 - ease));
            if (progress < 1) requestAnimationFrame(smoothScrollStep);
          }
      
          requestAnimationFrame(smoothScrollStep);
        });
      });
      </script>
      
      
  </head>

  <body class="flex flex-col m-0">
    <Header />
    <main class="flex-grow min-h-0">
      <slot />
    </main>
    <Footer />
  </body>
</html>

