---
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import "katex/dist/katex.min.css";
import "remixicon/fonts/remixicon.css";
import "../styles/output.css";

const { title } = Astro.props;
---

<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" href="../styles/output.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css"
      integrity="sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0"
      crossorigin="anonymous"
    />
    <link rel="icon" type="image/png" href="/images/logo.png">
    <link rel="apple-touch-icon" href="/images/apple-touch-icon.png">

    <title>{title}</title>
    <meta name="description" content="『第8回うぃーすた全国交流会』を2026年7月18日(土)〜19日(日)に大阪にて開催します！">

    <script>
      // --- デバイス判定 ---
      const isTouchDevice = 'ontouchstart' in window;

      // --- トップへ戻るボタン ---
      document.addEventListener("DOMContentLoaded", () => {
        const backToTopButton = document.getElementById('backToTop');
        if (!backToTopButton) return;

        backToTopButton.addEventListener('click', () => {
          if (isTouchDevice) {
            // スマホはネイティブスムーズスクロール
            window.scrollTo({ top: 0, behavior: 'smooth' });
          } else {
            // PCは自作スムーズスクロール
            const start = window.scrollY;
            const duration = 1500;
            const startTime = performance.now();

            function smoothScrollStep(now) {
              const elapsed = now - startTime;
              const progress = Math.min(elapsed / duration, 1);
              const ease = 1 - Math.pow(1 - progress, 3); // ease-out
              window.scrollTo(0, start * (1 - ease));
              if (progress < 1) requestAnimationFrame(smoothScrollStep);
            }

            requestAnimationFrame(smoothScrollStep);
          }
        });
      });
    </script>
  </head>

  <body class="flex flex-col min-h-screen overflow-y-auto overflow-x-hidden m-0">
    <Header />
    <main class="flex-grow min-h-0">
      <slot />
    </main>
    <Footer />
  </body>
</html>

